"use strict";(self["webpackChunkweek7"]=self["webpackChunkweek7"]||[]).push([[548],{1530:function(e,t,a){function s(e){return{all:e=e||new Map,on:function(t,a){var s=e.get(t);s?s.push(a):e.set(t,[a])},off:function(t,a){var s=e.get(t);s&&(a?s.splice(s.indexOf(a)>>>0,1):e.set(t,[]))},emit:function(t,a){var s=e.get(t);s&&s.slice().map((function(e){e(a)})),(s=e.get("*"))&&s.slice().map((function(e){e(t,a)}))}}}a.d(t,{Z:function(){return l}});const o=s();var l=o},9548:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var s=a(6252),o=a(3577),l=a(9963);const r=e=>((0,s.dD)("data-v-a9661c52"),e=e(),(0,s.Cn)(),e),i={class:"container py-5"},c=r((()=>(0,s._)("h2",{class:"text-center mb-3"},"訂單資訊",-1))),d={class:"my-5 row justify-content-center"},m={class:"mb-3"},n=r((()=>(0,s._)("label",{for:"email",class:"form-label"},"Email",-1))),u={class:"mb-3"},h=r((()=>(0,s._)("label",{for:"name",class:"form-label"},"收件人姓名",-1))),p={class:"mb-3"},f=r((()=>(0,s._)("label",{for:"tel",class:"form-label"},"收件人電話",-1))),g={class:"mb-3"},v=r((()=>(0,s._)("label",{for:"address",class:"form-label"},"收件人地址",-1))),b={class:"mb-3"},_=r((()=>(0,s._)("label",{for:"message",class:"form-label"},"留言",-1))),C=r((()=>(0,s._)("div",{class:"text-end"},[(0,s._)("button",{type:"submit",class:"btn btn-outline-danger"},"送出訂單")],-1)));function V(e,t,a,r,V,x){const $=(0,s.up)("v-field"),y=(0,s.up)("error-message"),I=(0,s.up)("v-form");return(0,s.wg)(),(0,s.iD)("div",i,[c,(0,s._)("div",d,[(0,s.Wm)(I,{ref:"form",class:"col-md-6",onSubmit:x.createOrder},{default:(0,s.w5)((({errors:e})=>[(0,s._)("div",m,[n,(0,s.Wm)($,{id:"email",name:"email",type:"email",class:(0,o.C_)(["form-control",{"is-invalid":e["email"]}]),modelValue:V.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=e=>V.form.user.email=e),placeholder:"請輸入 Email",rules:"email|required"},null,8,["modelValue","class"]),(0,s.Wm)(y,{name:"email",class:"invalid-feedback"})]),(0,s._)("div",u,[h,(0,s.Wm)($,{id:"name",name:"姓名",type:"text",class:(0,o.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:V.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=e=>V.form.user.name=e)},null,8,["class","modelValue"]),(0,s.Wm)(y,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",p,[f,(0,s.Wm)($,{id:"tel",name:"電話",type:"text",class:(0,o.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:V.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=e=>V.form.user.tel=e)},null,8,["class","modelValue"]),(0,s.Wm)(y,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",g,[v,(0,s.Wm)($,{id:"address",name:"地址",type:"text",class:(0,o.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:V.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>V.form.user.address=e)},null,8,["class","modelValue"]),(0,s.Wm)(y,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",b,[_,(0,s.wy)((0,s._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=e=>V.form.message=e)},null,512),[[l.nr,V.form.message]])]),C])),_:1},8,["onSubmit"])])])}var x=a(1530),$=a(2954),y={data(){return{cartData:{carts:[]},form:{user:{name:"",email:"",tel:"",address:"",message:""}},products:[],product:{},productId:"",isLoadingItem:""}},components:{VForm:$.l0,VField:$.gN,ErrorMessage:$.Bc},methods:{getProducts(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/ttest/products/all").then((e=>{this.products=e.data.products}))},openProductModal(e){this.productId=e,this.$refs.productModal.openModal()},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/ttest/cart").then((e=>{this.cartData=e.data.data}))},addToCart(e,t=1){const a={product_id:e,qty:t};this.isLoadingItem=e,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/ttest/cart",{data:a}).then((e=>{console.log(e.data),this.getCart(),this.$refs.productModal.closeModal(),this.isLoadingItem="",x.Z.emit("get-cart")})).catch((e=>{console.log(e.data)}))},removeCartItem(e){this.isLoadingItem=e,this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/ttest/cart/${e}`).then((e=>{this.getCart(),this.isLoadingItem="",x.Z.emit("get-cart")}))},removeCartItems(){this.$http.delete("https://vue3-course-api.hexschool.io/v2/api/ttest/carts").then((()=>{this.getCart(),x.Z.emit("get-cart")})).catch((e=>{console.log(e.data)}))},updateCart(e){const t={product_id:e.product.id,qty:e.qty};this.isLoadingItem=e.id,this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/ttest/cart/${e.id}`,{data:t}).then((e=>{console.log(e.data),this.getCart(),this.isLoadingItem="",x.Z.emit("get-cart")}))},createOrder(){const e="https://vue3-course-api.hexschool.io/v2/api/ttest/order",t=this.form;this.$http.post(e,{data:t}).then((e=>{console.log(e),alert(e.data.message),this.$refs.form.resetForm(),this.form.message="",this.getCart(),this.$router.push("/success")})).catch((e=>{alert(e.data.message)}))}},mounted(){this.getProducts(),this.getCart()}},I=a(3744);const k=(0,I.Z)(y,[["render",V],["__scopeId","data-v-a9661c52"]]);var w=k}}]);
//# sourceMappingURL=548.b506fe54.js.map